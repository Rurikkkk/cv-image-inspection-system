# Image Management Service

Микросервис отвечает за приём, хранение, удаление и учёт изображений, а также за взаимодействие с сервисом разметки. Используется как backend для фронтенда и как связующее звено между пользователем и сервисом разметки.

## Основные возможности
- Приём изображений от пользователя (через фронтенд)
- Сохранение исходных и размеченных изображений
- Взаимодействие с сервисом разметки (отправка изображений на обработку)
- Хранение и предоставление информации о всех изображениях и списках объектов на них в формате JSON
- Удаление изображений и связанных с ними данных

## Запуск 

### Локально:

1. Перейдите в директорию сервиса:
   ```sh
   cd src/backend/image_management_service
   ```
2. Установите зависимости:
   ```sh
   pip install -r requirements.txt
   ```
3. Запустите сервис:
   ```sh
   python app.py
   ```

### В Docker:

1. Перейдите в директорию сервиса:
   ```sh
   cd src/backend/image_management_service
   ```
2. Соберите Docker-образ:
   ```sh
   docker build -t image_management_service .
   ```
3. Запустите контейнер:
   ```sh
   docker run -d -p 5001:5000 \
     -v $(pwd)/../data:/app/data \
     --name image_management_service \
     image_management_service
   ```

- Порт 5001 на хосте будет проброшен на 5000 внутри контейнера.
- Папка data будет общей с хостом (для хранения изображений и JSON).

## Переменные и настройки
- Все пути к папкам изображений и URL микросервисов задаются в файле `src/backend/config.py`.
- Сервис по умолчанию запускается на порту 5000.

## API
- `POST /api/images/upload` — загрузка изображения
- `POST /api/images/delete` — удаление изображения
- `GET /api/images/images` — получение списка изображений и объектов на них
- `GET /api/images/image/<filename>` — получение файла изображения (имя относительно `DATA_DIR` в `config.py`)
- `GET /api/images/image/download/<filename>` — скачивание файла изображения (имя относительно `DATA_DIR` в `config.py`)

## Зависимости
- Flask
- flask-cors
- requests

## Примечания
- Для работы требуется запущенный сервис разметки.
- Все изображения и JSON-файл хранятся в папке `DATA_DIR` (указывается в `config.py`, создаётся автоматически).
